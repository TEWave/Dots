<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown to 4:30 PM</title>
    
    <!-- Link to p5.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    
    <style>
        body {
            background-color: black;
            margin: 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
    </style>
</head>
<body>
    <script>
        let dots = [];
        const totalMinutes = 510;  // 8:00 AM to 4:30 PM is 510 minutes
        let startTime;
        let lastTimeChecked;

        function setup() {
            createCanvas(windowWidth, windowHeight);
            initializeDots();
            startTime = millis();
            lastTimeChecked = getElapsedMinutes();
        }

        function draw() {
            background(0);

            let currentMinute = getElapsedMinutes();
            
            // If a minute has passed, remove a dot
            if (currentMinute > lastTimeChecked) {
                lastTimeChecked = currentMinute;
                removeDot();
            }

            // Display the dots
            for (let dot of dots) {
                dot.display();
            }

            // Display the remaining time to 4:30 PM
            let remainingTime = totalMinutes - currentMinute;
            textSize(48);
            fill(255);
            textAlign(CENTER, CENTER);
            text(nf(remainingTime, 3), width / 2, height / 2);
        }

        // Calculate how many minutes have passed since 8:00 AM
        function getElapsedMinutes() {
            let now = new Date();
            let startOfDay = new Date(now);
            startOfDay.setHours(8, 0, 0, 0);  // Set time to 8:00 AM today

            let elapsedMillis = now - startOfDay;  // Elapsed time in milliseconds
            return Math.floor(elapsedMillis / 60000);  // Convert to minutes
        }

        // Initialize the dots array, one dot per minute
        function initializeDots() {
            let cols = Math.floor(width / 30);
            let rows = Math.floor(height / 30);
            let totalDots = cols * rows;

            for (let i = 0; i < totalDots; i++) {
                let x = (i % cols) * 30 + 15;
                let y = Math.floor(i / cols) * 30 + 15;
                dots.push(new Dot(x, y));
            }
        }

        // Remove one dot every minute
        function removeDot() {
            if (dots.length > 0) {
                dots.shift();  // Remove the first dot from the array
            }
        }

        // Dot class to create and display dots
        class Dot {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.size = 20;
            }

            display() {
                noStroke();
                fill(255);
                ellipse(this.x, this.y, this.size, this.size);
            }
        }
    </script>
</body>
</html>

